{"version":3,"sources":["webpack:///./src/views/Issues.vue","webpack:///./src/components/IssueChart.vue","webpack:///./src/components/IssueChart.vue?f788","webpack:///./src/views/Issues.vue?c898","webpack:///./src/views/Issues.vue?cb03"],"names":["id","for","class","type","name","days","action","getIssues","repository","loading","errored","issues","props","data","chart","width","height","margin","svg","watch","val","this","remove","renderChart","computed","boundedWidth","boundedHeight","mounted","d3","attr","methods","renderTitle","title","select","empty","append","text","issues_val","yAccessor","d","yScale","range","domain","call","ticks","xScale","map","s","day","padding","barGroups","selectAll","enter","g","bandwidth","on","event","i","transition","duration","a","replace","render","components","IssueChart","now","Date","dateRange","startDate","date","setDate","getDate","created","toISOString","split","get","params","per_page","then","response","payload","toLocaleDateString","items","forEach","item","created_at","key","obj","filter","o","catch","error","console","finally"],"mappings":"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","file":"js/chunk-742f2d0b.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <div>\n      <label for=\"number-of-days\"\n        >Number of days:\n        <input\n          name=\"number-of-days\"\n          id=\"number-of-days\"\n          type=\"number\"\n          v-model=\"days\"\n        />\n      </label>\n    </div>\n    <form action=\"#\" @submit.prevent=\"getIssues\">\n      <div class=\"form-group\">\n        <label>\n          Github Repo:\n          <input\n            type=\"text\"\n            v-model=\"repository\"\n          />\n        </label>\n      </div>\n      <button type=\"submit\">Create graph</button>\n    </form>\n    <div class=\"alert alert-info\" v-show=\"loading\">Loading...</div>\n    <div class=\"alert alert-danger\" v-show=\"errored\">An error occured</div>\n    <issue-chart :issues=\"issues\" :days=\"days\" />\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport axios from \"axios\";\nimport IssueChart from \"@/components/IssueChart.vue\";\n\nexport default {\n  name: \"Issues\",\n  components: {\n    IssueChart,\n  },\n  data() {\n    return {\n      loading: false,\n      errored: false,\n      issues: [],\n      repository: \"\",\n      now: new Date(),\n      days: 6,\n    };\n  },\n  computed: {\n    dateRange() {\n      return d3.timeDay.range(this.startDate, this.now);\n    },\n    startDate: function () {\n      const date = new Date();\n      date.setDate(this.now.getDate() - this.days);\n      return date;\n    },\n  },\n  mounted() {},\n  methods: {\n    getIssues() {\n      this.loading = true;\n      this.errored = false;\n      const created = this.startDate.toISOString().split(\"T\")[0];\n      axios\n        .get(\n          `https://api.github.com/search/issues?q=repo:${this.repository}+is:issue+is:open+created:>=${created}`,\n          { params: { per_page: 100 } }\n        )\n        .then((response) => {\n          const payload = this.dateRange.map(function (date) {\n            return { day: date.toLocaleDateString(), issues: 0 };\n          });\n          response.data.items.forEach((item) => {\n            const date = new Date(item.created_at);\n            const key = date.toLocaleDateString();\n            const obj = payload.filter((o) => o.day === key)[0];\n            if (obj) {\n              obj.issues += 1;\n            }\n          });\n\n          this.issues = payload;\n        })\n        .catch((error) => {\n          console.error(error);\n          this.errored = true;\n        })\n        .finally(() => (this.loading = false));\n    },\n  },\n};\n</script>\n\n<style>\n.bar {\n  fill: #319bbe;\n}\n</style>\n","<template>\n  <div>\n    <svg></svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\n\nexport default {\n  props: [\"issues\", \"days\"],\n  data() {\n    return {\n      chart: null,\n      width: 1000,\n      height: 600,\n      margin: 60,\n      svg: null,\n    };\n  },\n  watch: {\n    issues(val) {\n      if (this.chart != null) {\n        this.chart.remove();\n      }\n      this.renderChart(val);\n    },\n  },\n  computed: {\n    boundedWidth() {\n      return this.width - 2 * this.margin;\n    },\n    boundedHeight() {\n      return this.height - 2 * this.margin;\n    },\n  },\n  mounted() {\n    this.svg = d3\n      .select(\"svg\")\n      .attr(\"width\", this.width)\n      .attr(\"height\", this.height);\n  },\n  methods: {\n    renderTitle() {\n      let title = this.svg.select(\".title\");\n      if (title.empty()) {\n        title = this.svg\n          .append(\"text\")\n          .attr(\"class\", \"title\")\n          .attr(\"x\", this.boundedWidth / 2 + this.margin)\n          .attr(\"y\", 40)\n          .attr(\"text-anchor\", \"middle\");\n      }\n      title.text(\"Issues in the past \" + this.days + \" days\");\n    },\n    renderChart(issues_val) {\n      this.chart = this.svg\n        .append(\"g\")\n        .attr(\"transform\", `translate(${this.margin}, ${this.margin})`);\n\n      const yAccessor = (d) => d.issues;\n\n      const yScale = d3\n        .scaleLinear()\n        .range([this.boundedHeight, 0])\n        .domain([0, d3.max(issues_val, yAccessor)]);\n\n      this.chart\n        .append(\"g\")\n        .call(d3.axisLeft(yScale).ticks(d3.max(issues_val, yAccessor)));\n\n      const xScale = d3\n        .scaleBand()\n        .range([0, this.boundedWidth])\n        .domain(issues_val.map((s) => s.day))\n        .padding(0.2);\n\n      this.chart\n        .append(\"g\")\n        .attr(\"transform\", `translate(0, ${this.boundedHeight})`)\n        .call(d3.axisBottom(xScale));\n\n      const barGroups = this.chart.selectAll(\"rect\").data(issues_val).enter();\n\n      //const svg = this.svg;\n      const chart = this.chart;\n      barGroups\n        .append(\"rect\")\n        .attr(\"class\", \"bar\")\n        .attr(\"x\", (g) => xScale(g.day))\n        .attr(\"y\", (g) => yScale(g.issues))\n        .attr(\"height\", (g) => this.boundedHeight - yScale(g.issues))\n        .attr(\"width\", xScale.bandwidth())\n        .on(\"mouseenter\", function (event, i) {\n          d3.select(this).attr(\"opacity\", 0.3);\n          d3.select(this)\n            .transition()\n            .duration(300)\n            .attr(\"opacity\", 0.6)\n            .attr(\"x\", (a) => xScale(a.day) - 5)\n            .attr(\"width\", xScale.bandwidth() + 10);\n          chart\n            .append(\"text\")\n            .attr(\"class\", \"value\")\n            .attr(\"id\", \"v\" + i.day.replace(/\\./g, \"\"))\n            .attr(\"x\", xScale(i.day) + xScale.bandwidth() / 2)\n            .attr(\"y\", yScale(i.issues) - 10)\n            .attr(\"text-anchor\", \"middle\")\n            .text(`${i.issues} issues`);\n        })\n        .on(\"mouseleave\", function (event, i) {\n          d3.selectAll(\".issues\").attr(\"opacity\", 1);\n\n          d3.select(this)\n            .transition()\n            .duration(300)\n            .attr(\"opacity\", 1)\n            .attr(\"x\", (a) => xScale(a.day))\n            .attr(\"width\", xScale.bandwidth());\n\n          chart.select(\"#v\" + i.day.replace(/\\./g, \"\")).remove();\n          //svg.selectAll(\".value\").remove();\n        });\n\n      this.renderTitle();\n      if (this.svg.selectAll(\".label\").empty()) {\n        this.svg\n          .append(\"text\")\n          .attr(\"class\", \"label\")\n          .attr(\"x\", -(this.boundedHeight / 2) - this.margin)\n          .attr(\"y\", this.margin / 2.4)\n          .attr(\"transform\", \"rotate(-90)\")\n          .attr(\"text-anchor\", \"middle\")\n          .text(\"Issues opened\");\n\n        this.svg\n          .append(\"text\")\n          .attr(\"class\", \"label\")\n          .attr(\"x\", this.boundedWidth / 2 + this.margin)\n          .attr(\"y\", this.boundedHeight + this.margin * 1.7)\n          .attr(\"text-anchor\", \"middle\")\n          .text(\"Days\");\n      }\n    },\n  },\n};\n</script>","import { render } from \"./IssueChart.vue?vue&type=template&id=565cd6b2\"\nimport script from \"./IssueChart.vue?vue&type=script&lang=js\"\nexport * from \"./IssueChart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Issues.vue?vue&type=template&id=a16b08f6\"\nimport script from \"./Issues.vue?vue&type=script&lang=js\"\nexport * from \"./Issues.vue?vue&type=script&lang=js\"\n\nimport \"./Issues.vue?vue&type=style&index=0&id=a16b08f6&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Issues.vue?vue&type=style&index=0&id=a16b08f6&lang=css\""],"sourceRoot":""}